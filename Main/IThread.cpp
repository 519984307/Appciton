#include "IThread.h"

/**************************************************************************************************
 * 功能： 主运行入口。
 *************************************************************************************************/
void IThread::run()
{
    while (1)
    {
        if (_entry != NULL)
        {
            _entry();
        }
        else
        {
            msleep(5000);
        }

        if (_isStop)
        {
            break;
        }
    }
}
#include "Debug.h"
/**************************************************************************************************
 * 功能： 退出。
 *************************************************************************************************/
void IThread::stop(void)
{
    _isStop = true;
debug("%s enter wait\n", qPrintable(_name));
    wait();
debug("%s exit wait\n", qPrintable(_name));
}

/**************************************************************************************************
 * 功能： 构造。
 *************************************************************************************************/
IThread::IThread(const QString &name, iThreadEntry entry)
{
    _name = name;
    _entry = entry;
    _isStop = false;
}

/**************************************************************************************************
 * 功能： 析构。
 *************************************************************************************************/
IThread::~IThread()
{

}
